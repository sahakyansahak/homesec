<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">
	<meta name="author" content="Jozef DvorskÃ½ - creatingo.com">

	<title>Home cameras</title>

	<!-- Bootstrap core CSS with custom theme variables + Additional theme styles -->
    <link href="static/assets/css/iot-theme-bundle.min.css" rel="stylesheet">

</head>

<body>

	<form id="log" action="log"></form>
	<form id="hm" action="home"></form>
	<form id="clim" action="climate"></form>

	<!-- Preloader -->
	<div id="iot-preloader">
		<div class="center-preloader d-flex align-items-center">
			<div class="spinners">
				<div class="spinner01"></div>
				<div class="spinner02"></div>
			</div>
		</div>
	</div>

	<!-- Alerts Modal -->
	<div class="modal modal-nobg centered fade" id="alertsModal" tabindex="-1" role="dialog" aria-label="Alerts" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-body">
					<div class="alert alert-danger alert-dismissible fade show border-0" role="alert">
						<button type="button" class="close" data-dismiss="alert" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button> Security SW update available
					</div>
					<div class="alert alert-warning alert-dismissible fade show border-0" role="alert">
						<button type="button" class="close" data-dismiss="alert" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button> New device recognized
					</div>
					<div class="alert alert-warning alert-dismissible fade show border-0" role="alert">
						<button type="button" class="close" data-dismiss="alert" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button> User profile is not complete
					</div>
				</div>
			</div>
		</div>
		<button type="button" class="close close-modal" data-dismiss="modal" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		</button>
	</div>

	<!-- Wrapper START -->
	<div id="wrapper" class="hidden">
		<!-- Top navbar START -->
		<nav class="navbar fixed-top border-bottom">
			<a class="navbar-brand pt-0 px-lg-3 px-1 mr-0" href="#"></a>
			<div class="ml-auto">
				<div class="navbar-nav navbar-icons flex-row">
					<div class="nav-item">
						<button id="alerts-toggler" class="btn btn-link nav-link" title="Alerts" type="button" data-alerts="3" data-toggle="modal" data-target="#alertsModal">
							<svg class="icon-sprite">
								<svg viewBox="0 0 64 64">
									  <title>Alert</title>
									  <desc>alert symbol</desc>
									  <g fill="currentColor">
									    <path d="M50,40c-2.2,0-4-1.8-4-4v-9c0-7.1-5.2-12.9-12-13.8c0,0,0-2.2-2-2.2s-2,2.2-2,2.2c-6.8,1-12,6.8-12,13.8v9
											c0,2.2-1.8,4-4,4h-1v5h38v-5H50z"/>
									    <path d="M32,52c3,0,5-2,5-5H27C27,50,29,52,32,52z"/>
									  </g>
								</svg>
								<svg class="text-danger">
									<svg viewBox="0 0 64 64">
										    <g class="icon-dot" fill="currentColor">
										     <circle cx="56" cy="8" r="6"/>
										    </g>
									</svg>
								</svg>
							</svg>
						</button>
					</div>
					<div class="nav-item" id="admin_panel">
						<a class="nav-link">
							<svg class="icon-sprite">
								<svg viewBox="0 0 64 64">
									  <title>Settings</title>
									  <desc>Settings symbol</desc>
									  <g fill="currentColor">
									    <path d="M53,35v-6h-4.8c-0.4-2.3-1.3-4.5-2.6-6.3l3.4-3.4L44.7,15l-3.4,3.4c-1.9-1.3-4-2.2-6.3-2.6V11h-6v4.8
											c-2.3,0.4-4.5,1.3-6.4,2.6L19.3,15L15,19.3l3.4,3.4c-1.3,1.9-2.2,4-2.6,6.3H11v6h4.8c0.4,2.3,1.3,4.5,2.6,6.3L15,44.7l4.2,4.2
											l3.4-3.4c1.9,1.3,4,2.2,6.3,2.6V53h6v-4.8c2.3-0.4,4.5-1.3,6.3-2.6l3.4,3.4l4.2-4.2l-3.4-3.4c1.3-1.9,2.2-4,2.6-6.3H53z M32,40.4c-4.6,0-8.4-3.8-8.4-8.4c0-4.6,3.8-8.4,8.4-8.4c4.6,0,8.4,3.8,8.4,8.4C40.4,36.6,36.6,40.4,32,40.4z"/>
									  </g>
								</svg>
							</svg> 
						</a>
					</div>
					<div class="nav-item" onclick="logouti()">
						<a class="nav-link">
							<svg class="icon-sprite">
								<svg viewBox="0 0 64 64">
									  <title>Logout</title>
									  <desc>Logout symbol</desc>
									  <g fill="currentColor">
									    <path d="M39,14.28v7.77c3.6,2.31,6,6.34,6,10.94c0,7.18-5.82,13-13,13s-13-5.82-13-13c0-4.6,2.4-8.63,6-10.94v-7.77C17.41,17.12,12,24.42,12,33c0,11.05,8.95,20,20,20s20-8.95,20-20C52,24.42,46.59,17.12,39,14.28z"/>
									    <rect x="28" y="11" width="8" height="18"/>
									  </g>
								</svg>
							</svg> 
						</a>
					</div>
				</div>
			</div>
		</nav>
		<!-- Top navbar END -->

		<!-- Main content START -->
		<div class="container-fluid px-4 px-sm-5">
			<div class="row">
				<div class="col-sm-12 col-md-6">
					<!-- Camera 1  START -->
					<div class="card active" data-unit="switch-camera-1">
						<div class="card-img-top card-stream">
							<div class="embed-responsive embed-responsive-16by9">
								<video muted loop>
									<source src="assets/videos/street.mp4" type="video/mp4" />
									<source src="assets/videos/street.webm" type="video/webm" />
								</video>
								<div class="card-preloader">
									<div class="center-preloader d-flex align-items-center">
										<div class="spinners">
											<div class="spinner01"></div>
											<div class="spinner02"></div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="card-img-top card-stream off">
							<div class="embed-responsive embed-responsive-16by9">
								<h2 class="center-abs">OFF</h2>
							</div>
						</div>
						<!-- Camera switch START -->
						<div class="card-body d-flex">
							<svg class="icon-sprite">
								<use xlink:href="assets/images/icons-sprite.svg#camera"/>
							</svg>
							<h5>Outdoor front</h5>
							<label class="switch ml-auto checked">
								<input type="checkbox" id="switch-camera-1" checked>
							</label>
						</div>
						<!-- Camera switch END -->
						<hr class="my-0">
						<!-- Bulb details START -->
						<ul class="list-group borderless px-1">
							<li class="list-group-item pt-3 pb-2">
								<p class="specs">Connection</p>
								<p class="ml-auto mb-0 py-1 text-success">OK</p>
							</li>
							<li class="list-group-item py-2 flex-column flex-sm-row justify-content-between">
								<p class="specs">Night vision</p>
								<div class="btn-group btn-group-toggle mb-auto py-1" data-toggle="buttons">
									<label class="btn btn-label btn-sm mb-0 active">
										<input type="radio" name="options" id="c1-nv-auto" autocomplete="off" checked> AUTO
									</label>
									<label class="btn btn-label btn-sm mb-0">
										<input type="radio" name="options" id="c1-nv-on" autocomplete="off"> ON
									</label>
									<label class="btn btn-label btn-sm mb-0">
										<input type="radio" name="options" id="c1-nv-off" autocomplete="off"> OFF
									</label>
								</div>
							</li>
							<li class="list-group-item pt-2 pb-4 flex-column flex-sm-row justify-content-between">
								<p class="specs">Timelaps recording</p>
								<div class="btn-group btn-group-toggle mb-auto py-1" data-toggle="buttons">
									<label class="btn btn-label btn-sm mb-0 active">
										<input type="radio" name="options" id="c1-rec-on" autocomplete="off" checked> ENABLE
									</label>
									<label class="btn btn-label btn-sm mb-0">
										<input type="radio" name="options" id="c1-rec-off" autocomplete="off"> DISABLE
									</label>
								</div>
							</li>
						</ul>
						<!-- Bulb details END -->
					</div>
					<!-- Camera 1  END -->
				</div>
				<div class="col-sm-12 col-md-6">
					<!-- Camera 2  START -->
					<div class="card" data-unit="switch-camera-2">
						<div class="card-img-top card-stream">
							<div class="embed-responsive embed-responsive-16by9">
								<video muted loop>
									<source src="assets/videos/room.mp4" type="video/mp4" />
									<source src="assets/videos/room.webm" type="video/webm" />
								</video>
								<div class="card-preloader">
									<div class="center-preloader d-flex align-items-center">
										<div class="spinners">
											<div class="spinner01"></div>
											<div class="spinner02"></div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="card-img-top card-stream off">
							<div class="embed-responsive embed-responsive-16by9">
								<h2 class="center-abs">OFF</h2>
							</div>
						</div>
						<!-- Camera switch START -->
						<div class="card-body d-flex">
							<svg class="icon-sprite">
                      			<svg viewBox="0 0 64 64">
                      				  <title>Camera</title>
									  <desc>Camera symbol</desc>
									  <g fill="currentColor">
									    <polygon points="5,39 17,36 25,44 22,57"/>
									    <path d="M52,50h3V33h-3v7h-6l-4-4l12-12L38,7L14,30l17,17l9-9l5,5h7V50z M36,35c-1.7,0-3-1.3-3-3c0-1.7,1.3-3,3-3
											s3,1.3,3,3C39,33.7,37.7,35,36,35z"/>
									  </g>
                      			</svg>
                    		</svg>
							<h5>Joe's room</h5>
							<label class="switch ml-auto">
                      <input type="checkbox" id="switch-camera-2">
                    </label>
						</div>
						<!-- Camera switch END -->
						<hr class="my-0">
						<!-- Bulb details START -->
						<ul class="list-group borderless px-1">
							<li class="list-group-item pt-3 pb-2">
								<p class="specs">Connection</p>
								<p class="ml-auto mb-0 py-1 text-success">OK</p>
							</li>
							<li class="list-group-item flex-column py-2">
								<p class="specs w-100">Night vision</p>
								<div class="btn-group btn-group-toggle w-100 py-2" data-toggle="buttons">
									<label class="btn btn-label btn-sm mb-0 col-4 active">
                          				<input type="radio" name="options" id="c2-nv-auto" autocomplete="off" checked> AUTO
                        			</label>
									<label class="btn btn-label btn-sm mb-0 col-4">
                          				<input type="radio" name="options" id="c2-nv-on" autocomplete="off"> ON
                        			</label>
									<label class="btn btn-label btn-sm mb-0 col-4">
                          				<input type="radio" name="options" id="c2-nv-off" autocomplete="off"> OFF
                        			</label>
								</div>
								<div class="info-holder info-ct">
									<div data-toggle="popover-all" data-content="Group of radio buttons." data-original-title="Option settings" data-placement="bottom" data-offset="0,-32"></div>
								</div>
							</li>
							<li class="list-group-item flex-column pt-2 pb-4">
								<p class="specs w-100">Timelaps recording</p>
								<div class="btn-group btn-group-toggle w-100 ml-auto py-2" data-toggle="buttons">
									<label class="btn btn-label btn-sm mb-0 w-100 active">
                          				<input type="radio" name="options" id="c2-rec-on" autocomplete="off" checked> ENABLE
                        			</label>
									<label class="btn btn-label btn-sm mb-0 w-100">
                          				<input type="radio" name="options" id="c2-rec-off" autocomplete="off"> DISABLE
                        			</label>
								</div>
							</li>
						</ul>
						<!-- Bulb details END -->
					</div>
					<!-- Camera 2  END -->
				</div>
			</div>
		</div>
		<!-- Main content END -->
		<!-- Bottom navbar START -->
		<nav class="navbar fixed-bottom navbar-expand-sm navbar-dark bg-dark">
			<button class="navbar-toggler mx-auto text-primary collapsed" type="button" data-toggle="collapse" data-target="#bottomCollapse" aria-expanded="false">
        		<svg class="icon-sprite">
        			<svg viewBox="0 0 64 64">
        				  <title>Menu Arrow</title>
						  <desc>Menu Arrow symbol</desc>
						  <g fill="currentColor">
						    <rect x="25" y="16" width="14" height="6"/>
						    <rect x="15" y="30" width="34" height="6"/>
						    <rect x="5" y="44" width="54" height="6"/>
						  </g>
        			</svg>
        		</svg>
      		</button>
			<div class="collapse navbar-collapse" id="bottomCollapse">
				<ul class="navbar-nav mx-auto">
					<li class="nav-item">
						<a class="nav-link" onclick="document.getElementById('hm').submit()">
							<svg class="icon-sprite">
								<svg viewBox="0 0 64 64">
									  <title>Dashboard</title>
									  <desc>Dashboard symbol</desc>
									  <g fill="currentColor">
									    <rect x="26" y="36" width="29" height="16"/>
									    <rect x="9" y="22" width="14" height="30"/>
									    <rect x="26" y="22" width="13" height="11"/>
									    <rect x="42" y="22" width="13" height="11"/>
									    <path d="M9,12v7h46v-7H9z M41.5,17c-0.83,0-1.5-0.67-1.5-1.5s0.67-1.5,1.5-1.5s1.5,0.67,1.5,1.5S42.33,17,41.5,17z
											 M46.5,17c-0.83,0-1.5-0.67-1.5-1.5s0.67-1.5,1.5-1.5s1.5,0.67,1.5,1.5S47.33,17,46.5,17z M51.5,17c-0.83,0-1.5-0.67-1.5-1.5s0.67-1.5,1.5-1.5s1.5,0.67,1.5,1.5S52.33,17,51.5,17z"/>
									  </g>
								</svg>
							</svg> <span>Dashboard</span>
						</a>
					</li>
					<li class="nav-item active">
						<a class="nav-link active">
							<svg class="icon-sprite">
								<svg viewBox="0 0 64 64">
									  <title>Camera</title>
									  <desc>Camera symbol</desc>
									  <g fill="currentColor">
									    <polygon points="5,39 17,36 25,44 22,57"/>
									    <path d="M52,50h3V33h-3v7h-6l-4-4l12-12L38,7L14,30l17,17l9-9l5,5h7V50z M36,35c-1.7,0-3-1.3-3-3c0-1.7,1.3-3,3-3
											s3,1.3,3,3C39,33.7,37.7,35,36,35z"/>
									  </g>
								</svg>
							</svg> <span>Cameras</span>
						</a>
					</li>
					<li class="nav-item" onclick="document.getElementById('clim').submit()">
						<a class="nav-link">
							<svg class="icon-sprite">
								<svg viewBox="0 0 64 64">
									  <title>Thermometer</title>
									  <desc>Thermometer symbol</desc>
									  <g fill="currentColor">
									    <path d="M41,30.84V18c0-5.52-4.48-10-10-10c-5.52,0-10,4.48-10,10v12.84c-3.06,2.75-5,6.72-5,11.16c0,8.28,6.72,15,15,15
											c8.28,0,15-6.72,15-15C46,37.56,44.06,33.59,41,30.84z M31,53c-6.08,0-11-4.93-11-11c0-3.86,1.99-7.25,5-9.21V18c0-3.31,2.69-6,6-6
											s6,2.69,6,6v14.79c3.01,1.96,5,5.35,5,9.21C42,48.07,37.07,53,31,53z"/>
									    <path d="M33.5,35.47V23h-5v12.47C25.87,36.48,24,39.02,24,42c0,3.87,3.13,7,7,7c3.87,0,7-3.13,7-7C38,39.02,36.13,36.48,33.5,35.47z"/>
									    <rect x="44" y="15" width="8" height="2"/>
									    <rect x="44" y="21" width="8" height="2"/>
									    <rect x="44" y="27" width="8" height="2"/>
									  </g>
								</svg>
							</svg> <span>Climate</span>
						</a>
					</li>
				</ul>
			</div>
		</nav>
		<!-- Bottom navbar END -->
	</div>
	<!-- Wrapper END -->

	<!-- FAB button - bottom right on large screens -->


	<!-- jQuery -->
	<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

	<!-- Bootstrap bundle -->
	<script src="static/assets/js/bootstrap.bundle.min.js"></script>

	<!-- Cross browser support for SVG icon sprites -->
	<script src="static/assets/js/svg4everybody.min.js"></script>

	<!-- jQuery countdown timer plugin (Exit modal, Garage doors, Washing machine) -->
	<script src="static/assets/js/iot-timer.min.js"></script>

	<!-- Basic theme functionality (arming, garage doors, switches ...) - using jQuery -->
	<script src="static/assets/js/iot-functions.min.js"></script>

	<script>
		$(document).ready(function() {


			// Get checkbox statuses from localStorage if available (IE)
			if (localStorage) {

				// Switch statuses
				var switchValues = JSON.parse(localStorage.getItem('switchValues')) || {};

				$.each(switchValues, function(key, value) {

					// Apply only if element is included on the page
					if ($('[data-unit="' + key + '"]').length) {

						if (value === true) {

							// Apply appearance of the "unit" and checkbox element
							$('[data-unit="' + key + '"]').addClass("active");
							$("#" + key).prop('checked', true);
							$("#" + key).closest("label").addClass("checked");

							//In case of Camera unit - play video
							if (key === "switch-camera-1" || key === "switch-camera-2") {
								$('[data-unit="' + key + '"] video')[0].play();
							}

						} else {
							$('[data-unit="' + key + '"]').removeClass("active");
							$("#" + key).prop('checked', false);
							$("#" + key).closest("label").removeClass("checked");
							if (key === "switch-camera-1" || key === "switch-camera-2") {
								$('[data-unit="' + key + '"] video')[0].pause();
							}
						}
					}
				});
			}

			// Switch (checkbox element) toogler
			$('.switch input[type="checkbox"]').on("change", function(t) {

				// Check the time between changes to prevert Android native browser execute twice
				// If you dont need support for Android native browser - just call "switchSingle" function
				if (this.last) {

					this.diff = t.timeStamp - this.last;

					// Don't execute if the time between changes is too short (less than 250ms) - Android native browser "twice bug"
					// The real time between two human taps/clicks is usually much more than 250ms"
					if (this.diff > 250) {

						this.last = t.timeStamp;

						iot.switchSingle(this.id, this.checked);

					} else {
						return false;
					}

				} else {

					// First attempt on this switch element
					this.last = t.timeStamp;

					iot.switchSingle(this.id, this.checked);

				}
			});

			// Reposition to center when a modal is shown
			$('.modal.centered').on('show.bs.modal', iot.centerModal);

			// Alerts "Close" callback - hide modal and alert indicator dot when user closes all alerts
			$('#alertsModal .alert').on('close.bs.alert', function() {
				var sum = $('#alerts-toggler').attr('data-alerts');
				sum = sum - 1;
				$('#alerts-toggler').attr('data-alerts', sum);

				if (sum === 0) {
					$('#alertsModal').modal('hide');
					$('#alerts-toggler').attr('data-toggle', 'none');

				}

			});

			// Show/hide tips (popovers) - FAB button (right bottom on large screens)
			$('#info-toggler').click(function() {

				if ($('body').hasClass('info-active')) {
					$('[data-toggle="popover-all"]').popover('hide');
					$('body').removeClass('info-active');
				} else {
					$('[data-toggle="popover-all"]').popover('show');
					$('body').addClass('info-active');
				}
			});

			// Hide tips (popovers) by clicking outside
			$('body').on('click', function(pop) {

				if (pop.target.id !== 'info-toggler' && $('body').hasClass('info-active')) {
					$('[data-toggle="popover-all"]').popover('hide');
					$('body').removeClass('info-active');
				}

			});

		});

		// Apply necessary changes, functionality when content is loaded
		$(window).on('load', function() {

			// This script is necessary for cross browsers icon sprite support (IE9+, ...) 
			svg4everybody();

			if ($('[data-unit="switch-camera-1"]').hasClass("active")) {
				var activeVideo = $('[data-unit="switch-camera-1"] video').get(0);

				if (activeVideo.paused) {
					activeVideo.autoplay = true;
					activeVideo.load();
					activeVideo.play();
				} else {
					activeVideo.pause();
				}
			}

			if ($('[data-unit="switch-camera-2"]').hasClass("active")) {
				var activeVideo = $('[data-unit="switch-camera-2"] video').get(0);

				if (activeVideo.paused) {
					activeVideo.autoplay = true;
					activeVideo.load();
					activeVideo.play();
				} else {
					activeVideo.pause();
				}
			}

			// "Timeout" function is not neccessary - important is to hide the preloader overlay
			setTimeout(function() {

				// Hide preloader overlay when content is loaded
				$('#iot-preloader,.card-preloader').fadeOut();
				$("#wrapper").removeClass("hidden");

				// Check for Main contents scrollbar visibility and set right position for FAB button
				iot.positionFab();

			}, 800);

		});

		// Apply necessary changes if window resized
		$(window).on('resize', function() {

			// Modal reposition when the window is resized
			$('.modal.centered:visible').each(iot.centerModal);

			// Check for Main contents scrollbar visibility and set right position for FAB button
			iot.positionFab();
		});

	function logouti(){
		$.post("/valod");
		$.post("/valod");
		document.getElementById("log").submit();
		window.location.href = "log";
	}

	  $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};

        (function(){

                            $.getJSON(
            $SCRIPT_ROOT+"/get_curr_us", // Your AJAX route here
            function(get_curr_us) {
            	console.log(get_curr_us[0][2]);
            	if(get_curr_us[0][2] == 1){
            		document.getElementById("admin_panel").style.display = "block";
            	}
            	else{
            		document.getElementById("admin_panel").style.display = "none";
            	}
            });
         })();

	</script>

</body>

</html>
